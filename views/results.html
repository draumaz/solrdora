{{ define "content" }}
<h1>Search Results</h1>

<form action="/catalog" method="GET">
  <input type="text" id="q" name="q" value="{{ .Q }}" placeholder="enter text" autofocus/>
  <div style="display:none;" id="facets_form">
    {{ range $facet := .Facets }}
      {{ range .Values }}
        {{ if .Active }}
          <input type="text" id="fq" name="fq" value="{{ $facet.Field }}|{{ .Text }}" />
        {{ end }}
      {{ end }}
    {{ end }}
  </div>
  <button type="submit">Search</button>
</form>

<a href="{{ .PrevPageUrl }}">PREV</a>
<a href="{{ .NextPageUrl }}">NEXT</a>

<p>Searched for:
  <b>{{ .Q }}</b>
  {{ if ne .Q "" }}
    <a href="{{ safeURL .UrlNoQ }}"> (remove)</a>
  {{ end }}
  {{ range $facet := .Facets }}
    {{ range .Values }}
      {{ if .Active }}
        {{ $facet.Title }} > {{ .Text }} <a href="{{ safeURL .RemoveUrl }}">(remove)</a>
      {{ end }}
    {{ end }}
  {{ end }}
</p>
<p>Found: {{ .NumFound }}</p>
<p>Start: {{ .Start }}, Rows: {{ .Rows }}</p>

<div class="items">
{{ range .Results }}
  <div class="item">
  {{ range $name, $values := .Document }}
    {{ if eq $name "id" }}
      <p><b>ID: </b><a href="/catalog/{{$values}}">{{ $values }}</a></p>
    {{ else }}
      <p><b>{{ $name }}:</b> {{ $values }}</p>
    {{ end }}
  {{ end }}
  </div>
{{ end }}
</div>

<h2>Facets</h2>
<ul>
  {{ range $facet := .Facets }}
  <p><b>{{ .Title }}</b> ({{ .Field }})</p>
    {{ range .Values }}
      <p>
        {{ if .Active }}
          {{ .Text }}, {{ .Count }} <a href="{{ safeURL .RemoveUrl }}">(remove)</a>
        {{ else }}
          <a href="{{ safeURL .AddUrl }}">{{ .Text }}, {{ .Count }} </a>
        {{ end }}
      </p>
    {{ end }}
  {{ end }}
</ul>
{{ end }}
