{{ define "content" }}
<div class="row">
  <div class="col-md-4">
    <form action="/search" method="GET">
      <input type="text" id="q" name="q" value="{{ .Q }}" placeholder="enter text" autofocus/>
      <div style="display:none;" id="facets_form">
        {{ range $facet := .Facets }}
          {{ range .Values }}
            {{ if .Active }}
              <input type="text" id="fq" name="fq" value="{{ $facet.Field }}|{{ .Text }}" />
            {{ end }}
          {{ end }}
        {{ end }}
      </div>
      <button type="submit">Search</button>
    </form>
  </div>
  <div class="col-md-8">
    <p>Searched for:
      <b>{{ .Q }}</b>
      {{ if ne .Q "" }}
        <a href="{{ safeURL .UrlNoQ }}"> (remove)</a>
      {{ end }}
      {{ range $facet := .Facets }}
        {{ range .Values }}
          {{ if .Active }}
            {{ $facet.Title }} > {{ .Text }} <a href="{{ safeURL .RemoveUrl }}">(remove)</a>
          {{ end }}
        {{ end }}
      {{ end }}
    </p>
  </div>
</div>

<div class="row">
  <div class="col-md-4">
    <!-- facets -->
    {{ range $facet := .Facets }}
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">{{ .Title }}</h3>
        </div>
        <div class="panel-body">
          {{ range .Values }}
            <p>
            {{ if .Active }}
                <span class="badge" style="float: right;">{{ .Count }}</span>
                {{ .Text }} <a href="{{ safeURL .RemoveUrl }}">(remove)</a>
            {{ else }}
                <span class="badge" style="float: right;">{{ .Count }}</span>
                <a href="{{ safeURL .AddUrl }}">{{ .Text }}</a>
            {{ end }}
            </p>
          {{ end }}
        </div>
      </div>
    {{ end }}
  </div>
  <div class="col-md-8">
    <div class="btn-group" role="group" aria-label="...">
      <a class="btn btn-default" href="{{ .PrevPageUrl }}">Previous</a>
      <a class="btn btn-default">{{ .Start }} - {{ .Rows }} of {{ .NumFound }}</a>
      <a class="btn btn-default" href="{{ .NextPageUrl }}">Next</a>
    </div>
    <div>&nbsp;</div>

    <div class="list-group">
      {{ range .Results }}
        <div class="list-group-item">
          <p><a href="/view/{{ .Id }}">{{ .Id }}</a></p>
          {{ range $name, $values := .Document }}
            {{ if ne $name "id" }}
              <p><b>{{ $name }}:</b> {{ $values }}</p>
            {{ end }}
          {{ end }}
        </div>
      {{ end }}
    </div>

  </div>
</div>

{{ end }}
