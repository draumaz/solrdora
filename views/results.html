{{ define "content" }}
<div class="row">
  <h1>Search Results</h1>

  <form action="/search" method="GET">
    <input type="text" id="q" name="q" value="{{ .Q }}" placeholder="enter text" autofocus/>
    <div style="display:none;" id="facets_form">
      {{ range $facet := .Facets }}
        {{ range .Values }}
          {{ if .Active }}
            <input type="text" id="fq" name="fq" value="{{ $facet.Field }}|{{ .Text }}" />
          {{ end }}
        {{ end }}
      {{ end }}
    </div>
    <button type="submit">Search</button>
  </form>

  <a href="{{ .PrevPageUrl }}">PREV</a>
  <a href="{{ .NextPageUrl }}">NEXT</a>

  <p>Searched for:
    <b>{{ .Q }}</b>
    {{ if ne .Q "" }}
      <a href="{{ safeURL .UrlNoQ }}"> (remove)</a>
    {{ end }}
    {{ range $facet := .Facets }}
      {{ range .Values }}
        {{ if .Active }}
          {{ $facet.Title }} > {{ .Text }} <a href="{{ safeURL .RemoveUrl }}">(remove)</a>
        {{ end }}
      {{ end }}
    {{ end }}
  </p>
  <p>Found: {{ .NumFound }}</p>
  <p>Start: {{ .Start }}, Rows: {{ .Rows }}</p>
</div>

<div class="row">
  <!-- facets -->
  <div class="col-md-4">
    {{ range $facet := .Facets }}
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">{{ .Title }} ({{ .Field }})</h3>
        </div>
        <div class="panel-body">
          <ul class="list-group">
            {{ range .Values }}
              {{ if .Active }}
                <li class="list-group-item">
                  <span class="badge">{{ .Count }}</span>
                  {{ .Text }} <a href="{{ safeURL .RemoveUrl }}">(remove)</a>
              {{ else }}
                <li class="list-group-item">
                  <span class="badge">{{ .Count }}</span>
                  <a href="{{ safeURL .AddUrl }}">{{ .Text }}</a>
              {{ end }}
            {{ end }}
          </ul>
        </div>
      </div>
    {{ end }}
  </div> <!-- col-md-4 -->

  <!-- results -->
  <div class="col-md-8">
    <div class="list-group">
      {{ range .Results }}
        <div class="list-group-item">
          <p><a href="/view/{{ .Id }}">{{ .Id }}</a></p>
          {{ range $name, $values := .Document }}
            {{ if ne $name "id" }}
              <p><b>{{ $name }}:</b> {{ $values }}</p>
            {{ end }}
          {{ end }}
        </div>
      {{ end }}
    </div>
  </div> <!-- col-md-8 -->
</div>

{{ end }}
